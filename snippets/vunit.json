{
    "VHDL Testbench with VUnit": {
        "prefix": [
            "VUnit: vunit_tb"
        ],
        "body": [
            "library ieee;",
            "use ieee.std_logic_1164.all;",
            "use ieee.numeric_std.all;",
            "",
            "library vunit_lib;",
            "context vunit_lib.vunit_context;",
            "",
            "entity tb_${1:$TM_FILENAME_BASE} is",
            "\t-- used by VUnit",
            "\tgeneric (runner_cfg : string);",
            "end tb_$1;",
            "",
            "architecture ${2:Bhv} of tb_$1 is",
            "\t",
            "\t--------------------------------------------------------------------",
            "\t-- ClockFrequency",
            "\t--------------------------------------------------------------------",
            "\tconstant cClkFreq  : natural  := ${3:50E6};",
            "",
            "\t--------------------------------------------------------------------",
            "\t-- component ports",
            "\t--------------------------------------------------------------------",
            "\tsignal Clk       : std_logic  := '1';",
            "\tsignal nRstAsync : std_ulogic := not('1');",
            "\t$0",
            "begin",
            "",
            "\t--------------------------------------------------------------------",
            "\t-- entity instantiation with components",
            "\t-- -> search for \"entity {} - instantiation\"",
            "\t-- -> if right entity not found use the shortcut \"Strg + Alt + S\"",
            "\t--------------------------------------------------------------------",
            "\t",
            "\t",
            "\t--------------------------------------------------------------------",
            "\t-- clock generation",
            "\t--------------------------------------------------------------------",
            "\tClk <= not(Clk) after 1 sec/cClkFreq/2;",
            "",
            "\t--------------------------------------------------------------------",
            "\t-- VUnit testcases",
            "\t--------------------------------------------------------------------",
            "\tmain : process",
            "\tbegin",
            "\t\t-- VUnit setup",
            "\t\ttest_runner_setup(runner, runner_cfg);",
            "",
            "\t\t-- loop used to run several VUnit testcases",
            "\t\twhile test_suite loop",
            "\t\t\t-- define one VUnit testcase",
            "\t\t\tif run(\"testcase_1:test1\") then",
            "\t\t\t\t",
            "\t\t\t\t",
            "\t\t\t\t",
            "\t\t\t-- define another VUnit testcase",
            "\t\t\telsif run(\"testcase_2:test2\") then",
            "\t\t\t\t",
            "\t\t\t\t",
            "\t\t\t\t",
            "\t\t\tend if;",
            "\t\tend loop;",
            "",
            "\t\ttest_runner_cleanup(runner);",
            "",
            "\tend process;",
            "",
            "end architecture;"
        ],
        "description": "VHDL testbench VUnit template"
    }
}
